---
title: "Water Chemistry Script"
format: html
editor: visual
execute: 
  echo: true
  warning: false
---

## 

```{r}
library(metajam)
library(tidyverse)
library(here)
library(janitor)
library(lubridate)
```

### Reading in the raw data

```{r}
## Read in the data using metajam:

raw_BQ1 <- metajam::read_d1_files(
  folder_path = "/courses/EDS214/threeza-crowd/__QuebradaCuenca1-Bisley__csv", 
  fnc = "read_csv")
raw_BQ2 <- metajam::read_d1_files(
  folder_path = "/courses/EDS214/threeza-crowd/__QuebradaCuenca2-Bisley__csv", 
  fnc = "read_csv")
raw_BQ3 <- metajam::read_d1_files(
  folder_path = "/courses/EDS214/threeza-crowd/__QuebradaCuenca3-Bisley__csv", 
  fnc = "read_csv")
raw_PRM <- metajam::read_d1_files(
  folder_path = "/courses/EDS214/threeza-crowd/__RioMameyesPuenteRoto__csv", 
  fnc = "read_csv")

## Save the data frames from each site data set as the initial data frame for each

BQ1_initial <- raw_BQ1$data
BQ2_initial <- raw_BQ2$data
BQ3_initial <- raw_BQ3$data
PRM_initial <- raw_PRM$data
```

## Psuedo Code

```{r}
##Read in Q1, Q2, Q3, RMP data sets
##Merge the 4 data sets by date
##Clean names
##Pivot longer
##Select for NO3- (Nitrate) and K (Potassium)
##Group by site
##ggplot for Potassium
##ggplot for Nitrate
##add ggplots together using divide (potassium/nitrate)
```

## Cleaning the data

```{r}
bq1 <- BQ1_initial %>% 
  clean_names()

bq2 <- BQ2_initial %>% 
  clean_names()

bq3 <- BQ3_initial %>% 
  clean_names()

prm <- PRM_initial %>%
  clean_names()
```

## Combine the rows

```{r}
joined_data <- bind_rows(bq1, bq2, bq3, prm)

## select to keep rows: sample_id, sample_date, no3_n, k
stream_quality <- joined_data %>%
  select(sample_id, sample_date, no3_n, k) %>% 
  mutate(year = year(sample_date))
```
